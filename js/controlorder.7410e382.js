(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["controlorder"],{"15d0":function(t,e,s){},c963:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid p-5",attrs:{id:"controlorder"}},[s("div",{staticClass:"row mx-5 px-5 pb-4 border-bottom border-dark"},[s("h5",{staticClass:"col-10"},[t._v("訂單管理")]),s("div",{staticClass:"col-2 text-right"},[t.changelist?s("div",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.liststatus()}}},[t._v(" 現在是新到舊 ")]):s("div",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.liststatus()}}},[t._v(" 現在是舊到新 ")])])]),s("div",{staticClass:"row mx-5 px-5 mb-4 mt-2"},[s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"19%"}},[t._v(" 訂單編號 ")]),s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"15%"}},[t._v(" 總價 ")]),s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"15%"}},[t._v(" 付款方式 ")]),s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"18%"}},[t._v(" 付款狀態 ")]),s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"13%"}},[t._v(" 出貨狀態 ")]),s("div",{staticClass:"text-left d-flex align-self-center position-relative"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"search",attrs:{type:"text",placeholder:"搜尋訂單"},domProps:{value:t.filter},on:{input:function(e){e.target.composing||(t.filter=e.target.value)}}}),s("i",{staticClass:"fas fa-search position-absolute",staticStyle:{top:"22%",left:"85%"}})])]),s("div",{staticClass:"row mx-5 px-3"},[s("div",{staticClass:"w-100 p-2"},t._l(t.orderfilter,(function(e,i){return s("div",{key:e._id,staticClass:"orders_item border"},[s("div",{staticClass:"item_status d-flex p-3"},[s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"19%"}},[t._v(" "+t._s(e.item)+" ")]),s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"15%"}},[t._v(" NT"+t._s(t._f("thousands")(e.total))+" ")]),s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"15%"}},[t._v(" "+t._s(e.payment)+" ")]),!1===e.edit?s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"18%"}},[t._v(" "+t._s(e.pay)+" ")]):s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"18%"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.payModel,expression:"order.payModel"}],staticClass:"form-control",staticStyle:{width:"50%"},attrs:{id:"exampleFormControlSelect1"},on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"payModel",s.target.multiple?i:i[0])}}},[s("option",[t._v("未付款")]),s("option",[t._v("已付款")])])]),!1===e.edit?s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"13%"}},[t._v(" "+t._s(e.status)+" ")]):s("div",{staticClass:"text-left d-flex align-self-center",staticStyle:{width:"13%"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.statusModel,expression:"order.statusModel"}],staticClass:"form-control",staticStyle:{width:"80%"},attrs:{id:"exampleFormControlSelect1"},on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"statusModel",s.target.multiple?i:i[0])}}},[s("option",[t._v("未出貨")]),s("option",[t._v("已出貨")]),s("option",[t._v("已取貨")]),s("option",[t._v("已取消訂單")]),s("option",[t._v("已退貨")])])]),s("div",{staticClass:"text-left d-flex align-self-center"},[s("div",{staticClass:"btn btn-outline-secondary mr-3",on:{click:function(t){e.showoederdetail=!e.showoederdetail}}},[t._v(" 查看細項 ")]),!1===e.edit?s("div",[s("div",{staticClass:"btn btn-outline-success mr-3",on:{click:function(t){e.edit=!0}}},[t._v(" 編輯 ")]),s("div",{staticClass:"btn btn-outline-danger",on:{click:function(s){return t.del(e,i)}}},[t._v(" 刪除 ")])]):s("div",[s("div",{staticClass:"btn btn-outline-success mr-3",on:{click:function(s){return t.save(e)}}},[t._v(" 保存 ")]),s("div",{staticClass:"btn btn-outline-danger",on:{click:function(s){return t.cancel(e)}}},[t._v(" 取消 ")])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showoederdetail,expression:"order.showoederdetail"}],staticClass:"user_item_connect row m-0 w-100 border-top bg-white"},[s("div",{staticClass:"col-8 p-1"},t._l(e.products,(function(e){return s("div",{key:e._id,staticClass:"d-flex m-3 item_products",on:{click:function(s){return t.goDetail(e._id)}}},[s("div",{staticClass:"pic",staticStyle:{width:"10%"}},[s("img",{attrs:{src:e.src,alt:""}})]),s("div",{staticClass:"name ml-5",staticStyle:{width:"25%"}},[t._v(t._s(e.name))]),s("div",{staticClass:"quantity",staticStyle:{width:"25%"}},[t._v(" X"+t._s(e.quantity)+" ")]),s("div",{staticClass:"price",staticStyle:{width:"25%"}},[t._v(t._s(e.price))])])})),0),s("div",{staticClass:"col-4 border-left my-2"},[s("div",{staticClass:"item_connect d-flex flex-column justify-content-center align-items-start"},[s("div",{staticClass:"username mx-1 my-2"},[t._v(" 收件人: "+t._s(e.connect.userName)+" ")]),s("div",{staticClass:"userphone mx-1 my-2"},[t._v(" 連絡電話: "+t._s(e.connect.userPhone)+" ")]),s("div",{staticClass:"useremail mx-1 my-2"},[t._v(" 連絡信箱: "+t._s(e.connect.userEmail)+" ")]),s("div",{staticClass:"useraddress mx-1 my-2"},[t._v(" 收件地址: "+t._s(e.connect.userAddress)+" ")])])])])])})),0)])])},a=[],l=(s("4de4"),s("c975"),s("d81d"),s("a434"),{name:"ControlOder",data:function(){return{allorders:[],changelist:!1,filter:""}},computed:{orderfilter:function(){var t=this;return""===this.filter?this.allorders:this.allorders.filter((function(e){return e.item===t.filter}))}},methods:{getallorder:function(){var t=this;this.axios.get("https://lifepluss.herokuapp.com/orders").then((function(e){t.allorders=e.data.result.map((function(t){return t.payModel=t.pay,t.statusModel=t.status,t.showoederdetail=!1,t.edit=!1,t}))}))},liststatus:function(){this.allorders=this.allorders.reverse(),this.changelist?this.changelist=!1:this.changelist=!0},edit:function(t){t.edit=!0},save:function(t){var e=this;this.axios.patch("https://lifepluss.herokuapp.com/orders/"+t.item,{pay:t.payModel,status:t.statusModel}).then((function(s){t.edit=!1,t.pay=t.payModel,t.status=t.statusModel,e.$alert.success("更新成功")})).catch((function(t){e.$alert.error(t.response.data.message)}))},cancel:function(t){t.payModel=t.pay,t.statusModel=t.status,t.edit=!1},del:function(t,e){var s=this;this.axios.delete("https://lifepluss.herokuapp.com/orders/"+t.item).then((function(i){if(i.data.success){s.orderfilter.splice(e,1);var a=s.allorders.indexOf(t);s.allorders.splice(a,1),s.$alert.success("刪除成功")}else s.$alert.error(i.data.message)})).catch((function(t){s.$alert.error(t.response.data.message)}))}},created:function(){this.getallorder()}}),r=l,n=(s("e23d"),s("2877")),c=Object(n["a"])(r,i,a,!1,null,"2eca25ac",null);e["default"]=c.exports},d81d:function(t,e,s){"use strict";var i=s("23e7"),a=s("b727").map,l=s("1dde"),r=s("ae40"),n=l("map"),c=r("map");i({target:"Array",proto:!0,forced:!n||!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},e23d:function(t,e,s){"use strict";s("15d0")}}]);
//# sourceMappingURL=controlorder.7410e382.js.map