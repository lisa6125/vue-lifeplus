{"version":3,"sources":["webpack:///./src/components/custompage/ShareDetail.vue?4253","webpack:///src/components/custompage/ShareDetail.vue","webpack:///./src/components/custompage/ShareDetail.vue?ed10","webpack:///./src/components/custompage/ShareDetail.vue","webpack:///./src/components/custompage/ShareDetail.vue?15d0"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","_v","directives","name","rawName","modifiers","value","expression","domProps","on","$event","target","composing","description","ref","uploadFile","_l","url","key","submit","liststatus","item","idx","_id","src","_s","title","onshare","del","staticRenderFns","data","file","priviewPic","image","shares","methods","push","URL","createObjectURL","i","fd","append","$store","state","user","account","forEach","axios","getshares","created","component"],"mappings":"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","file":"js/sharedetail.df5eaaa9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-center px-md-5\",staticStyle:{\"padding-top\":\"100px\"},attrs:{\"id\":\"ShareDetail\"}},[_c('p',{staticStyle:{\"font-size\":\"2rem\"}},[_vm._v(\"你的分享\")]),_c('div',{staticClass:\"container-fluid px-md-5\"},[_c('div',{staticClass:\"row w-100 mb-4 pb-3\"},[_c('div',{staticClass:\"col-6 p-0 col-md-2 text-left\"},[_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.modal-center\",modifiers:{\"modal-center\":true}}]},[_vm._v(\"分享\")]),_c('b-modal',{attrs:{\"id\":\"modal-center\",\"centered\":\"\",\"title\":\"來分享你的生活吧!\"}},[_c('form',[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"exampleFormControlTextarea1\"}},[_vm._v(\"分享描述\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description),expression:\"description\"}],staticClass:\"form-control\",attrs:{\"id\":\"exampleFormControlTextarea1\",\"rows\":\"3\"},domProps:{\"value\":(_vm.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.description=$event.target.value}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"btn btn-info\"},[_c('input',{ref:\"fileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"max-size\":1024,\"exceedSizeText\":\"檔案大小不能超過\",\"accept\":\"image/*\",\"name\":\"file\"},on:{\"change\":_vm.uploadFile}}),_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'folder-plus'],\"size\":\"lg\"}}),_vm._v(\" 上傳圖片 \")],1),_c('br'),_vm._l((_vm.priviewPic),function(url){return _c('div',{key:url,attrs:{\"id\":\"showpic\"}},[_c('img',{key:url,attrs:{\"src\":url,\"alt\":\"\"}})])})],2),_c('div',{staticClass:\"btn btn-success float-right\",on:{\"click\":_vm.submit}},[_vm._v(\" 送出 \")])])])],1),_c('div',{staticClass:\"col-0 col-md-8\"}),_c('div',{staticClass:\"col-6 p-0 col-md-2 text-right\"},[(_vm.changelist)?_c('div',{staticClass:\"btn btn-outline-secondary\",on:{\"click\":function($event){return _vm.liststatus()}}},[_vm._v(\" 現在是新到舊 \")]):_c('div',{staticClass:\"btn btn-outline-secondary\",on:{\"click\":function($event){return _vm.liststatus()}}},[_vm._v(\" 現在是舊到新 \")])])]),_c('div',{staticClass:\"contain-fluid\"},[_c('div',{directives:[{name:\"masonry\",rawName:\"v-masonry\",value:(_vm.containerId),expression:\"containerId\"}],attrs:{\"transition-duration\":\"0.3s\",\"item-selector\":\".item\"}},_vm._l((_vm.shares),function(item,idx){return _c('div',{directives:[{name:\"masonry-tile\",rawName:\"v-masonry-tile\"}],key:item._id,staticClass:\"item\"},[_c('div',{staticClass:\"share-item\"},[_c('div',{staticClass:\"share-pic\"},[_c('img',{attrs:{\"src\":item.src,\"alt\":\"\"}})]),_c('div',{staticClass:\"share-text\"},[_c('div',{staticClass:\"box\"},[_c('span',{staticClass:\"mr-2\"},[_vm._v(\"分享內容\")]),_c('p',[_vm._v(_vm._s(item.title))])])]),_c('div',{staticClass:\"share-status text-left align-self-center my-3\"},[_c('span',{staticClass:\"ml-3 mr-2\"},[_vm._v(\"狀態:\")]),_vm._v(\" \"+_vm._s(item.onshare)+\" \"),_c('div',{staticClass:\"btn btn-outline-danger ml-5\",on:{\"click\":function($event){return _vm.del(item, idx)}}},[_vm._v(\" 刪除 \")])])])])}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"ShareDetail\" class=\"text-center px-md-5\" style=\"padding-top: 100px\">\n    <p style=\"font-size: 2rem\">你的分享</p>\n    <div class=\"container-fluid px-md-5\">\n      <div class=\"row w-100 mb-4 pb-3\">\n        <div class=\"col-6 p-0 col-md-2 text-left\">\n          <b-button v-b-modal.modal-center>分享</b-button>\n          <b-modal id=\"modal-center\" centered title=\"來分享你的生活吧!\">\n            <form>\n              <div class=\"form-group\">\n                <label for=\"exampleFormControlTextarea1\">分享描述</label>\n                <textarea\n                  class=\"form-control\"\n                  id=\"exampleFormControlTextarea1\"\n                  rows=\"3\"\n                  v-model=\"description\"\n                ></textarea>\n              </div>\n              <div class=\"form-group\">\n                <label class=\"btn btn-info\">\n                  <input\n                    style=\"display: none\"\n                    type=\"file\"\n                    :max-size=\"1024\"\n                    exceedSizeText=\"檔案大小不能超過\"\n                    accept=\"image/*\"\n                    name=\"file\"\n                    ref=\"fileInput\"\n                    @change=\"uploadFile\"\n                  />\n                  <font-awesome-icon\n                    :icon=\"['fas', 'folder-plus']\"\n                    size=\"lg\"\n                  ></font-awesome-icon>\n                  上傳圖片\n                </label>\n                <br />\n                <div id=\"showpic\" v-for=\"url in priviewPic\" :key=\"url\">\n                  <img :src=\"url\" :key=\"url\" alt=\"\" />\n                </div>\n              </div>\n              <div class=\"btn btn-success float-right\" @click=\"submit\">\n                送出\n              </div>\n            </form>\n          </b-modal>\n        </div>\n        <div class=\"col-0 col-md-8\"></div>\n        <div class=\"col-6 p-0 col-md-2 text-right\">\n          <div\n            class=\"btn btn-outline-secondary\"\n            v-if=\"changelist\"\n            @click=\"liststatus()\"\n          >\n            現在是新到舊\n          </div>\n          <div class=\"btn btn-outline-secondary\" v-else @click=\"liststatus()\">\n            現在是舊到新\n          </div>\n        </div>\n      </div>\n      <div class=\"contain-fluid\">\n        <div\n          v-masonry=\"containerId\"\n          transition-duration=\"0.3s\"\n          item-selector=\".item\"\n        >\n          <div\n            v-masonry-tile\n            class=\"item\"\n            v-for=\"(item, idx) in shares\"\n            :key=\"item._id\"\n          >\n            <div class=\"share-item\">\n              <div class=\"share-pic\">\n                <img :src=\"item.src\" alt=\"\" />\n              </div>\n              <div class=\"share-text\">\n                <div class=\"box\">\n                  <span class=\"mr-2\">分享內容</span>\n                  <p>{{ item.title }}</p>\n                </div>\n              </div>\n              <div class=\"share-status text-left align-self-center my-3\">\n                <span class=\"ml-3 mr-2\">狀態:</span>\n                {{ item.onshare }}\n                <div\n                  class=\"btn btn-outline-danger ml-5\"\n                  @click=\"del(item, idx)\"\n                >\n                  刪除\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ShareDetail',\n  data () {\n    return {\n      description: '',\n      file: null,\n      priviewPic: [],\n      image: [],\n      shares: []\n    }\n  },\n  methods: {\n    uploadFile () {\n      this.image = []\n      this.priviewPic = []\n      for (const i of this.$refs.fileInput.files) {\n        if (i.size > 1024 * 1024) {\n          this.image = []\n          this.$swal({\n            icon: 'error',\n            title: '錯誤',\n            text: '圖片太大'\n          })\n        } else if (!i.type.includes('image')) {\n          this.image = []\n          this.$swal({\n            icon: 'error',\n            title: '錯誤',\n            text: '檔案格式錯誤'\n          })\n        } else {\n          this.image.push(i)\n        }\n      }\n      // console.log(this.image)\n      // console.log(typeof this.image)\n      for (let i = 0; i < this.image.length; i++) {\n        this.priviewPic.push(URL.createObjectURL(this.image[i]))\n        // console.log(this.image[i])\n      }\n      // console.log(this.priviewPic)\n    },\n    submit () {\n      const fd = new FormData()\n      fd.append('poster', this.$store.state.user.account)\n      fd.append('title', this.description)\n      fd.append('onshare', '等待審核')\n      this.image.forEach(item => {\n        fd.append('file', item)\n      })\n      this.axios\n        .post(process.env.VUE_APP_API + '/shares/', fd)\n        .then(res => {\n          res.data.result.src =\n            process.env.VUE_APP_API +\n            '/shares/images/' +\n            res.data.result.images[0].file\n          this.shares.push(res.data.result)\n          this.$alert.success('上傳成功')\n          this.description = ''\n          this.priviewPic = []\n        })\n        .catch(err => {\n          this.$swal({\n            icon: 'error',\n            title: '錯誤',\n            text: err.response.data.message\n          })\n        })\n    },\n    getshares () {\n      this.axios\n        .get(\n          process.env.VUE_APP_API +\n            '/shares/share/' +\n            this.$store.state.user.account\n        )\n        .then(res => {\n          this.shares = res.data.result.map(e => {\n            e.src =\n              process.env.VUE_APP_API + '/shares/images/' + e.images[0].file\n            return e\n          })\n        })\n    },\n    del (item, idx) {\n      this.axios\n        .delete(process.env.VUE_APP_API + '/shares/' + item._id)\n        .then(res => {\n          if (res.data.success) {\n            this.shares.splice(idx, 1)\n            this.$alert.success('刪除成功')\n          } else {\n            this.$alert.error(res.data.message)\n          }\n        })\n        .catch(error => {\n          this.$alert.error(error.response.data.message)\n        })\n    }\n  },\n  created () {\n    this.getshares()\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n  .item{\n    margin 0 auto\n    width 300px\n    padding 10px\n    .post{\n      padding 10px\n      border-radius 5px\n      background white\n      img{\n        width 100%\n        height 100%\n        object-fit cover\n      }\n    }\n  }\n.share-item{\n  border 3px solid var(--brown1)\n  border-radius 10px\n  &:hover{\n    box-shadow 0 0 20px 10px rgba(0,0,0,0.1)\n    transform translate(0,-10px)\n    transition 0.3s ease\n  }\n}\n.share-pic{\n  overflow hidden\n  img{\n    width 100%\n    height 100%\n    object-fit contain\n  }\n}\n.share-text{\n  .box{\n    color white\n    font-size 1.2rem\n    background var(--brown3)\n    padding: 10px;\n    height 100%\n    margin 0 auto\n    p{\n      word-wrap:break-word\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShareDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShareDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShareDetail.vue?vue&type=template&id=41350cd3&scoped=true&\"\nimport script from \"./ShareDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./ShareDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShareDetail.vue?vue&type=style&index=0&id=41350cd3&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"41350cd3\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShareDetail.vue?vue&type=style&index=0&id=41350cd3&lang=stylus&scoped=true&\""],"sourceRoot":""}