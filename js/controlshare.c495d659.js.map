{"version":3,"sources":["webpack:///./src/components/controlPage/share.vue?2897","webpack:///src/components/controlPage/share.vue","webpack:///./src/components/controlPage/share.vue?0c42","webpack:///./src/components/controlPage/share.vue","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/components/controlPage/share.vue?8536"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","$event","filter","directives","name","rawName","value","expression","_l","item","index","key","_s","poster","src","title","$$selectedVal","Array","prototype","call","target","options","o","selected","map","val","_value","$set","multiple","onshare","cancel","edit","save","idx","_e","del","staticRenderFns","data","shares","computed","sharefilter","e","methods","getshares","axios","get","onsharemodel","created","component","$","$map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"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","file":"js/controlshare.c495d659.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid p-5\",attrs:{\"id\":\"Share\"}},[_c('div',{staticClass:\"row mx-5 px-5 pb-4 border-bottom border-dark\"},[_c('h5',{staticClass:\"col-7\"},[_vm._v(\"分享管理\")]),_c('div',{staticClass:\"col-5 text-right\"},[_c('div',{staticClass:\"btn btn-outline-secondary mr-3\",on:{\"click\":function($event){_vm.filter = '全部'}}},[_vm._v(\" 全部 \")]),_c('div',{staticClass:\"btn btn-outline-secondary mr-3\",on:{\"click\":function($event){_vm.filter = '等待審核'}}},[_vm._v(\" 未審核 \")]),_c('div',{staticClass:\"btn btn-outline-secondary mr-3\",on:{\"click\":function($event){_vm.filter = '審核通過'}}},[_vm._v(\" 審核通過 \")]),_c('div',{staticClass:\"btn btn-outline-secondary mr-3\",on:{\"click\":function($event){_vm.filter = '審核不通過'}}},[_vm._v(\" 審核不通過 \")])])]),_c('div',{staticClass:\"share-view\"},[_c('div',{directives:[{name:\"masonry\",rawName:\"v-masonry\",value:(_vm.containerId),expression:\"containerId\"}],attrs:{\"transition-duration\":\"0.3s\",\"item-selector\":\".item\"}},_vm._l((_vm.sharefilter),function(item,index){return _c('div',{directives:[{name:\"masonry-tile\",rawName:\"v-masonry-tile\"}],key:index,staticClass:\"item\"},[_c('div',{staticClass:\"post border\"},[_c('p',[_vm._v(_vm._s(item.poster))]),_c('img',{directives:[{name:\"pswp\",rawName:\"v-pswp\",value:(item),expression:\"item\"}],attrs:{\"src\":item.src,\"alt\":\"\"}}),_c('div',{staticClass:\"share-text\"},[_c('div',{staticClass:\"box\"},[_c('span',{staticClass:\"mr-2\"},[_vm._v(\"分享內容\")]),_c('p',[_vm._v(_vm._s(item.title))])])]),(item.edit)?_c('div',{staticClass:\"status my-3\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.onsharemodel),expression:\"item.onsharemodel\"}],attrs:{\"name\":\"\",\"id\":\"\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(item, \"onsharemodel\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"狀態\"}},[_vm._v(\"狀態\")]),_c('option',{attrs:{\"value\":\"等待審核\"}},[_vm._v(\"等待審核\")]),_c('option',{attrs:{\"value\":\"審核通過\"}},[_vm._v(\"審核通過\")]),_c('option',{attrs:{\"value\":\"審核不通過\"}},[_vm._v(\"審核不通過\")])])]):_c('div',{staticClass:\"status my-3\"},[_vm._v(\"目前為:\"+_vm._s(item.onshare))]),_c('div',{staticClass:\"edit_del\"},[(item.edit)?_c('div',{staticClass:\"btn btn-outline-warning mr-2\",on:{\"click\":function($event){return _vm.cancel(item)}}},[_vm._v(\" 取消 \")]):_c('div',{staticClass:\"btn btn-outline-success mr-2\",on:{\"click\":function($event){item.edit = true}}},[_vm._v(\" 編輯 \")]),(item.edit === true)?_c('div',{staticClass:\"btn btn-outline-success mr-2\",on:{\"click\":function($event){return _vm.save(item, _vm.idx)}}},[_vm._v(\" 保存 \")]):_vm._e(),_c('div',{staticClass:\"btn btn-outline-danger\",on:{\"click\":function($event){return _vm.del(item, _vm.idx)}}},[_vm._v(\" 刪除 \")])])])])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"Share\" class=\"container-fluid p-5\">\n    <div class=\"row mx-5 px-5 pb-4 border-bottom border-dark\">\n      <h5 class=\"col-7\">分享管理</h5>\n      <div class=\"col-5 text-right\">\n        <div class=\"btn btn-outline-secondary mr-3\" @click=\"filter = '全部'\">\n          全部\n        </div>\n        <div\n          class=\"btn btn-outline-secondary mr-3\"\n          @click=\"filter = '等待審核'\"\n        >\n          未審核\n        </div>\n        <div\n          class=\"btn btn-outline-secondary mr-3\"\n          @click=\"filter = '審核通過'\"\n        >\n          審核通過\n        </div>\n        <div\n          class=\"btn btn-outline-secondary mr-3\"\n          @click=\"filter = '審核不通過'\"\n        >\n          審核不通過\n        </div>\n      </div>\n    </div>\n    <div class=\"share-view\">\n      <div\n        v-masonry=\"containerId\"\n        transition-duration=\"0.3s\"\n        item-selector=\".item\"\n      >\n        <div\n          v-masonry-tile\n          class=\"item\"\n          v-for=\"(item, index) in sharefilter\"\n          :key=\"index\"\n        >\n          <div class=\"post border\">\n            <p>{{ item.poster }}</p>\n            <img :src=\"item.src\" v-pswp=\"item\" alt=\"\" />\n            <div class=\"share-text\">\n              <div class=\"box\">\n                <span class=\"mr-2\">分享內容</span>\n                <p>{{ item.title }}</p>\n              </div>\n            </div>\n            <div class=\"status my-3\" v-if=\"item.edit\">\n              <select name=\"\" id=\"\" v-model=\"item.onsharemodel\">\n                <option value=\"狀態\">狀態</option>\n                <option value=\"等待審核\">等待審核</option>\n                <option value=\"審核通過\">審核通過</option>\n                <option value=\"審核不通過\">審核不通過</option>\n              </select>\n            </div>\n            <div class=\"status my-3\" v-else>目前為:{{ item.onshare }}</div>\n            <div class=\"edit_del\">\n              <div\n                class=\"btn btn-outline-warning mr-2\"\n                @click=\"cancel(item)\"\n                v-if=\"item.edit\"\n              >\n                取消\n              </div>\n              <div\n                class=\"btn btn-outline-success mr-2\"\n                @click=\"item.edit = true\"\n                v-else\n              >\n                編輯\n              </div>\n              <div\n                class=\"btn btn-outline-success mr-2\"\n                @click=\"save(item, idx)\"\n                v-if=\"item.edit === true\"\n              >\n                保存\n              </div>\n              <div class=\"btn btn-outline-danger\" @click=\"del(item, idx)\">\n                刪除\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ControlShare',\n  data () {\n    return {\n      shares: [],\n      filter: '全部'\n    }\n  },\n  computed: {\n    sharefilter () {\n      if (this.filter === '全部') {\n        return this.shares\n      } else {\n        return this.shares.filter(e => {\n          return e.onshare === this.filter\n        })\n      }\n    }\n  },\n  methods: {\n    getshares () {\n      this.axios.get(process.env.VUE_APP_API + '/shares/').then(res => {\n        this.shares = res.data.result.map(e => {\n          e.src = process.env.VUE_APP_API + '/shares/images/' + e.images[0].file\n          e.onsharemodel = e.onshare\n          e.edit = false\n          return e\n        })\n      })\n    },\n    del (item, idx) {\n      this.axios\n        .delete(process.env.VUE_APP_API + '/shares/' + item._id)\n        .then(res => {\n          if (res.data.success) {\n            this.sharefilter.splice(idx, 1)\n            const index = this.shares.indexOf(item)\n            this.shares.splice(index, 1)\n            this.$alert.success('刪除成功')\n          } else {\n            this.$alert.error(res.data.message)\n          }\n        })\n        .catch(error => {\n          this.$alert.error(error.response.data.message)\n        })\n    },\n    cancel (item) {\n      item.onsharemodel = item.onshare\n      item.edit = false\n    },\n    save (item, idx) {\n      item.onshare = item.onsharemodel\n      this.axios\n        .patch(process.env.VUE_APP_API + '/shares/' + item._id, {\n          onshare: item.onsharemodel\n        })\n        .then(res => {\n          console.log(res.data.result)\n          this.shares[idx] = res.data.result\n          item.edit = false\n        })\n        .catch(error => {\n          console.log(error)\n          this.$alert.error(error.response.data.message)\n        })\n    }\n  },\n  created () {\n    this.getshares()\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.share-view{\n  padding 5%\n  @media screen and (max-width:1600px) {\n    padding 100px 50px 50px 50px\n    background-position center center\n  }\n  .item{\n    margin 0 auto\n    width 25%\n    padding 10px\n    @media screen and (max-width:576px) {\n    width 100%\n  }\n    .post{\n      padding 10px\n      border-radius 5px\n      background white\n      img{\n        width 100%\n        height 100%\n        object-fit cover\n      }\n    }\n  }\n}\n.share-text{\n  .box{\n    color white\n    font-size 1.2rem\n    background var(--brown3)\n    padding: 10px;\n    height 100%\n    margin 0 auto\n    p{\n      word-wrap:break-word\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./share.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./share.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./share.vue?vue&type=template&id=17eebd44&scoped=true&\"\nimport script from \"./share.vue?vue&type=script&lang=js&\"\nexport * from \"./share.vue?vue&type=script&lang=js&\"\nimport style0 from \"./share.vue?vue&type=style&index=0&id=17eebd44&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17eebd44\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./share.vue?vue&type=style&index=0&id=17eebd44&lang=stylus&scoped=true&\""],"sourceRoot":""}