(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sharedetail"],{"409a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center px-md-5",staticStyle:{"padding-top":"100px"},attrs:{id:"ShareDetail"}},[s("p",{staticStyle:{"font-size":"2rem"}},[t._v("你的分享")]),s("div",{staticClass:"container-fluid px-md-5"},[s("div",{staticClass:"row w-100 mb-4 pb-3"},[s("div",{staticClass:"col-6 p-0 col-md-2 text-left"},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}]},[t._v("分享")]),s("b-modal",{attrs:{id:"modal-center",centered:"",title:"來分享你的生活吧!"}},[s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("分享描述")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"3"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"btn btn-info"},[s("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file","max-size":1024,exceedSizeText:"檔案大小不能超過",accept:"image/*",name:"file"},on:{change:t.uploadFile}}),s("font-awesome-icon",{attrs:{icon:["fas","folder-plus"],size:"lg"}}),t._v(" 上傳圖片 ")],1),s("br"),t._l(t.priviewPic,(function(t){return s("div",{key:t,attrs:{id:"showpic"}},[s("img",{key:t,attrs:{src:t,alt:""}})])}))],2),s("div",{staticClass:"btn btn-success float-right",on:{click:t.submit}},[t._v(" 送出 ")])])])],1),s("div",{staticClass:"col-0 col-md-8"}),s("div",{staticClass:"col-6 p-0 col-md-2 text-right"},[t.changelist?s("div",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.liststatus()}}},[t._v(" 現在是新到舊 ")]):s("div",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.liststatus()}}},[t._v(" 現在是舊到新 ")])])]),s("div",{staticClass:"contain-fluid"},[s("div",{directives:[{name:"masonry",rawName:"v-masonry",value:t.containerId,expression:"containerId"}],attrs:{"transition-duration":"0.3s","item-selector":".item"}},t._l(t.shares,(function(e,a){return s("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:e._id,staticClass:"item"},[s("div",{staticClass:"share-item"},[s("div",{staticClass:"share-pic"},[s("img",{attrs:{src:e.src,alt:""}})]),s("div",{staticClass:"share-text"},[s("div",{staticClass:"box"},[s("span",{staticClass:"mr-2"},[t._v("分享內容")]),s("p",[t._v(t._s(e.title))])])]),s("div",{staticClass:"share-status text-left align-self-center my-3"},[s("span",{staticClass:"ml-3 mr-2"},[t._v("狀態:")]),t._v(" "+t._s(e.onshare)+" "),s("div",{staticClass:"btn btn-outline-danger ml-5",on:{click:function(s){return t.del(e,a)}}},[t._v(" 刪除 ")])])])])})),0)])])])},i=[],r=(s("a4d3"),s("e01a"),s("4160"),s("caad"),s("d81d"),s("a434"),s("d3b7"),s("2532"),s("3ca3"),s("159b"),s("ddb0"),s("2b3d"),s("b85c")),n={name:"ShareDetail",data:function(){return{description:"",file:null,priviewPic:[],image:[],shares:[]}},methods:{uploadFile:function(){this.image=[],this.priviewPic=[];var t,e=Object(r["a"])(this.$refs.fileInput.files);try{for(e.s();!(t=e.n()).done;){var s=t.value;s.size>1048576?(this.image=[],this.$swal({icon:"error",title:"錯誤",text:"圖片太大"})):s.type.includes("image")?this.image.push(s):(this.image=[],this.$swal({icon:"error",title:"錯誤",text:"檔案格式錯誤"}))}}catch(i){e.e(i)}finally{e.f()}for(var a=0;a<this.image.length;a++)this.priviewPic.push(URL.createObjectURL(this.image[a]))},submit:function(){var t=this,e=new FormData;e.append("poster",this.$store.state.user.account),e.append("title",this.description),e.append("onshare","等待審核"),this.image.forEach((function(t){e.append("file",t)})),this.axios.post("https://lifepluss.herokuapp.com/shares/",e).then((function(e){e.data.result.src="https://lifepluss.herokuapp.com/shares/images/"+e.data.result.images[0].file,t.shares.push(e.data.result),t.$alert.success("上傳成功"),t.description="",t.priviewPic=[]})).catch((function(e){t.$swal({icon:"error",title:"錯誤",text:e.response.data.message})}))},getshares:function(){var t=this;this.axios.get("https://lifepluss.herokuapp.com/shares/share/"+this.$store.state.user.account).then((function(e){t.shares=e.data.result.map((function(t){return t.src="https://lifepluss.herokuapp.com/shares/images/"+t.images[0].file,t}))}))},del:function(t,e){var s=this;this.axios.delete("https://lifepluss.herokuapp.com/shares/"+t._id).then((function(t){t.data.success?(s.shares.splice(e,1),s.$alert.success("刪除成功")):s.$alert.error(t.data.message)})).catch((function(t){s.$alert.error(t.response.data.message)}))}},created:function(){this.getshares()}},c=n,o=(s("d17e"),s("2877")),l=Object(o["a"])(c,a,i,!1,null,"41350cd3",null);e["default"]=l.exports},"6f24":function(t,e,s){},d17e:function(t,e,s){"use strict";s("6f24")}}]);
//# sourceMappingURL=sharedetail.df5eaaa9.js.map