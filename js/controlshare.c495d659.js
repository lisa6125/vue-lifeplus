(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["controlshare"],{"10fa":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid p-5",attrs:{id:"Share"}},[s("div",{staticClass:"row mx-5 px-5 pb-4 border-bottom border-dark"},[s("h5",{staticClass:"col-7"},[t._v("分享管理")]),s("div",{staticClass:"col-5 text-right"},[s("div",{staticClass:"btn btn-outline-secondary mr-3",on:{click:function(e){t.filter="全部"}}},[t._v(" 全部 ")]),s("div",{staticClass:"btn btn-outline-secondary mr-3",on:{click:function(e){t.filter="等待審核"}}},[t._v(" 未審核 ")]),s("div",{staticClass:"btn btn-outline-secondary mr-3",on:{click:function(e){t.filter="審核通過"}}},[t._v(" 審核通過 ")]),s("div",{staticClass:"btn btn-outline-secondary mr-3",on:{click:function(e){t.filter="審核不通過"}}},[t._v(" 審核不通過 ")])])]),s("div",{staticClass:"share-view"},[s("div",{directives:[{name:"masonry",rawName:"v-masonry",value:t.containerId,expression:"containerId"}],attrs:{"transition-duration":"0.3s","item-selector":".item"}},t._l(t.sharefilter,(function(e,a){return s("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:a,staticClass:"item"},[s("div",{staticClass:"post border"},[s("p",[t._v(t._s(e.poster))]),s("img",{directives:[{name:"pswp",rawName:"v-pswp",value:e,expression:"item"}],attrs:{src:e.src,alt:""}}),s("div",{staticClass:"share-text"},[s("div",{staticClass:"box"},[s("span",{staticClass:"mr-2"},[t._v("分享內容")]),s("p",[t._v(t._s(e.title))])])]),e.edit?s("div",{staticClass:"status my-3"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.onsharemodel,expression:"item.onsharemodel"}],attrs:{name:"",id:""},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"onsharemodel",s.target.multiple?a:a[0])}}},[s("option",{attrs:{value:"狀態"}},[t._v("狀態")]),s("option",{attrs:{value:"等待審核"}},[t._v("等待審核")]),s("option",{attrs:{value:"審核通過"}},[t._v("審核通過")]),s("option",{attrs:{value:"審核不通過"}},[t._v("審核不通過")])])]):s("div",{staticClass:"status my-3"},[t._v("目前為:"+t._s(e.onshare))]),s("div",{staticClass:"edit_del"},[e.edit?s("div",{staticClass:"btn btn-outline-warning mr-2",on:{click:function(s){return t.cancel(e)}}},[t._v(" 取消 ")]):s("div",{staticClass:"btn btn-outline-success mr-2",on:{click:function(t){e.edit=!0}}},[t._v(" 編輯 ")]),!0===e.edit?s("div",{staticClass:"btn btn-outline-success mr-2",on:{click:function(s){return t.save(e,t.idx)}}},[t._v(" 保存 ")]):t._e(),s("div",{staticClass:"btn btn-outline-danger",on:{click:function(s){return t.del(e,t.idx)}}},[t._v(" 刪除 ")])])])])})),0)])])},i=[],n=(s("4de4"),s("c975"),s("d81d"),s("a434"),{name:"ControlShare",data:function(){return{shares:[],filter:"全部"}},computed:{sharefilter:function(){var t=this;return"全部"===this.filter?this.shares:this.shares.filter((function(e){return e.onshare===t.filter}))}},methods:{getshares:function(){var t=this;this.axios.get("https://lifepluss.herokuapp.com/shares/").then((function(e){t.shares=e.data.result.map((function(t){return t.src="https://lifepluss.herokuapp.com/shares/images/"+t.images[0].file,t.onsharemodel=t.onshare,t.edit=!1,t}))}))},del:function(t,e){var s=this;this.axios.delete("https://lifepluss.herokuapp.com/shares/"+t._id).then((function(a){if(a.data.success){s.sharefilter.splice(e,1);var i=s.shares.indexOf(t);s.shares.splice(i,1),s.$alert.success("刪除成功")}else s.$alert.error(a.data.message)})).catch((function(t){s.$alert.error(t.response.data.message)}))},cancel:function(t){t.onsharemodel=t.onshare,t.edit=!1},save:function(t,e){var s=this;t.onshare=t.onsharemodel,this.axios.patch("https://lifepluss.herokuapp.com/shares/"+t._id,{onshare:t.onsharemodel}).then((function(a){console.log(a.data.result),s.shares[e]=a.data.result,t.edit=!1})).catch((function(t){console.log(t),s.$alert.error(t.response.data.message)}))}},created:function(){this.getshares()}}),r=n,o=(s("eac5"),s("2877")),c=Object(o["a"])(r,a,i,!1,null,"17eebd44",null);e["default"]=c.exports},bb8d:function(t,e,s){},d81d:function(t,e,s){"use strict";var a=s("23e7"),i=s("b727").map,n=s("1dde"),r=s("ae40"),o=n("map"),c=r("map");a({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},eac5:function(t,e,s){"use strict";s("bb8d")}}]);
//# sourceMappingURL=controlshare.c495d659.js.map